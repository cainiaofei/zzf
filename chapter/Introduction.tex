\chapter{绪言}

\section{研究背景}

软件可追踪性是指在软件开发过程中建立和维护软件制品之间的关联关系，并利用这些关系对软件项目进行一系列分析的能力~\cite{coest}。如图，在软件开发过程中，会产生各种软件制品，包括需求文档、软件架构、设计文档、用户手册和源代码等~\cite{Chen2011combining}。这些软件制品之间存在追踪关系。这些不同软件制品之间的追踪关系可以使得软件工程师更好的理解系统，保证软件的质量，同时也可以降低软件维护成本，有利于软件后期的维护和演化~\cite{antoniol2002recovering,Antoniol2000Modelling,Rempel2017Defects}。需求文档是对软件功能的描述，代码是软件的底层实现方式。因此需求到代码的可追踪性尤为重要也是当前领域的热点。

通过对照实验发现，对于软件维护工作而言，在需求到代码可追踪性的支持下，维护的正确率提高了60\%，效率提高了21\%~\cite{mader2012assessing}。
事实上，需求到代码的追踪数据描述了软件高层抽象和底层代码实现之间的对应关系。软件迭代过程中，当需求发生变更时，根据需求到代码的追踪数据可以快速找到要更新的代码位置。此外需求到代码的追踪信息可以应用于软件生命周期以支持变更影响分析、依赖影响分析、系统验证以及安全认证等活动~\cite{Huang2014Software,Antoniol2017Ten}。
然而，建立和维护需求到代码的追踪关系会耗费用户大量的精力并且很容易出错~\cite{ramesh2001toward}。在工业环境中，由于软件系统复杂度比较高，迭代速度比较快，人工的建立和维护需求到代码的追踪因关系代价高昂被很多组织放弃~\cite{gotel1994analysis,ramesh2001toward}。
当前领域内建立需求到代码追踪关系的主要方法是信息检索方法（Information Retrieve），但是此类方法严重依赖需求文档和代码文档的文本质量，生成的追踪数据质量不高。为解决这个问题，~\cite{mcmillan2009combining,Kuang2017closeness}考虑在信息检索方法的基础上考虑代码结构信息，但是这些方法往往受信息检索结果质量的影响。~\cite{hayes2006advancing,Lucia2006Incremental,panichella2013and}考虑用户反馈信息，但是这些方法往往需要大量的用户参与。因此，如何在减少用户参与的情况下，生成高质量的软件可追踪性数据是当前领域内研究的重点。


\section{研究现状}
在本节中，我们将会讨论软件可追踪生成领域的现状，主要包括当前可追踪生成的一些主流方法。
我们所关注的软件可追踪性是需求到代码元素的可追踪性。为此，能够直接关联需求与代码的主要方式，就是需求可追踪性（Traceability）。需求可追踪性能够追踪一个需求使用期限的全过程，提供了需求到产品整个过程范围的明确的查阅能力，以辅助利益相关者完成相应的软件活动。其中，需求到代码的可追踪性是领域内关注的热点。在近十年中，需求可追踪性是一个非常活跃的研究领域。在已有的工作中，涉及包括需求可追踪性问题分析~\cite{gotel1994analysis}， 需求可追踪性相关模型~\cite{ramesh2001toward}，需求可追踪性的自动化生成，追踪关系演化的管理~\cite{cleland2003event}，追踪关系的自动化维护~\cite{mader2012towards}及追踪关系生成与管理工具
~\cite{hayes2007requirements}等。本文的主要工作是需求可追踪性的自动生成。

尽管需求可追踪性对于软件系统演化的管理至关重要，但是它在实际中的使用仍然很有限。这主要是由于需求可追踪性的建立与维护需要高昂的人工与时间成本。为了解决这个问题，领域内采用一些半自动化的方法。当前主流的追踪关系生成方法是基于信息检索技术以计算实体间的相似性，并生成候选追踪关系~\cite{antoniol2002recovering,hayes2006advancing,marcus2003recovering,cleland2005utilizing}。
用户自上而下遍历候选列表并判断候选线索的有效性。
这种方法的精度严重依赖文本质量，当文本质量比较差时精度比较低。这是因为不同软件制品（例如需求和代码）经常采用不同的术语来描述同一个概念（单词试配问题）。为了解决这个问题，研究者在不同角度引入了多种增强策略
~\cite{Huang2005Utilizing,Malcom2011orthogonal}对字典进行了进一步分析。~\cite{mcmillan2009combining,Kuang2017closeness}加入了代码结构信息。

另一方面，大量用户使用用户反馈信息（user feedback）来提高精度，\cite{hayes2006advancing}要求用户迭代式判断追踪线索的有效性，然后根据用户反馈更改单词权重。~\cite{panichella2013and}提出一种结合用户反馈和代码依赖的方法，这种方法要求用户遍历整个候选列表，这对用户来说是不实际的。

为了提高追踪关系生成方法的精度，信息检索技术被用于与机器学习~\cite{cleland2010machine}，用户反馈\cite{panichella2013and}，动态分析~\cite{eaddy2008cerberus}等方式相结合。此类方法的一个局限在于，当候选追踪关系的召回率水平较高时，获取的候选追踪关系准确率较低（引入了大量的误报）。因此，维护人员需要人工检查并确认生成的追踪关系是否正确，从而使基于信息检索的追踪关系生成方法退化为半自动的方法。

\section{本文工作}
在对需求到代码可追踪性生成等相关领域进行了深入研究后，为了解决上述问题，本文完成了以下工作：
\begin{enumerate}
  \item 基于代码依赖紧密度分析和用户反馈的可追踪性生成方法。我们提出了一种结合了代码紧密度分析和用户反馈的软件可追踪生成方法。该方法有效利用了代码依赖紧密度和用户反馈两部分信息，一方面通过设置代码紧密度阈值划分代码域，使得功能相似的代码元素位于同一个代码域中；另一方面，将各代码域中有代表性的代码元素交由用户判断与需求相关性，根据用户反馈信息调整相关代码元素对应候选线索在排序表中的位置。

  \item 方法的验证及技术来源分析。我们在四个研究案例下设计实验，验证了上述方法的有效性。并且，介绍了在实验所用不同类型软件系统的代码依赖捕获过程。此外，对于实验中所用开源系统，我们阐述其可追踪数据集的整理过程。

  \item 基于代码依赖和用户反馈的软件可追踪生成工具的设计与实现。目前，领域内并没有相应的结合代码依赖和用户反馈的可追踪生成工具可以应用于实际的软件演化过程。因此，我们设计并实现软件可追踪生成工具，并集成了我们基于代码依赖和用户反馈的软件可追踪生成方法。

\end{enumerate}

\section{本文组织}
针对当前软件可追踪生成领域存在的问题，本文研究软件可追踪性生成这一问题。综合考虑代码依赖和用户反馈两部分信息，以提高结果精度并使用户少量参与为目标，从代码依赖获取和软件可追踪生成两个场景出发，研究了代码依赖和用户反馈如何有效协作提高候选列表精度。论文总共六章，第一章作为绪论，提出了文本的研究背景及概要结构，其余五章的概要内容总结如下：

第二章主要介绍了与本文研究相关的概念与工作，包括软件可追踪生成，结合代码依赖关系，用户反馈和信息检索的相关技术。

第三章介绍基于代码依赖和用户反馈的软件可追踪生成方法。介绍如何通过代码依赖紧密度阈值划分代码域，使得功能相似的代码元素位于同一个代码域中以及如何结合代码域和用户反馈提高软件可追踪生成精度。

第四章介绍了我们对于结合代码依赖和用户反馈的软件可追踪生成方法的实验验证及技术来源。我们在四个研究案例下设计实验，验证了我们方法的有效性。并且，我们阐述了代码依赖的获取方法，提出了通过运行测试集获得代码依赖的方法。此外，对于实验中所用开源系统，我们阐述其可追踪数据集的整理过程。

第五章介绍了软件可追踪生成工具的设计实现，及其在实际软件活动过程中的应用。

第六章是对全文工作的总结，并基于我们已有的研究内容展望未来工作。
